#!/usr/bin/env python
# coding: utf-8

# Force Python version
from payu import reversion
reversion.repython('2.7.5', __file__)

# Standard Library
import os

# Local
import payu.model


#---
def payu_run(model_name):

    model = payu.model.index[model_name]
    expt = model()
    expt.modules.append('ipm')

    expt.setup()
    expt.run()
    expt.archive()

    if expt.n_runs > 0:
        expt.resubmit()


#---
if __name__ == '__main__':

    model_name = os.environ.get('PAYU_MODEL')
    payu_run(model_name)
