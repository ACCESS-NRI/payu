#!/usr/bin/env python

import sys
#sys.path.append('/projects/v45/python')

import argparse
import os
import payu

# TODO: How to move this to payu.py?
model_index = {'mom': payu.Mom,
               'mom4': payu.mom4,
               'mitgcm': payu.mitgcm,
               'gold': payu.gold}


def payu_run(model_name):

    model = model_index[model_name]
    expt = model()

    expt.setup()
    expt.run()
    expt.archive()

    if expt.counter < expt.max_counter:
        expt.resubmit()


if __name__ == '__main__':

    model_name = os.environ['payu_model']
    payu_run(model_name)
