#!/usr/bin/env python

import argparse
import payu as payu

# TODO: How to move this to payu.py?
model_index = {'mom': payu.Mom,
               'mom4': payu.mom4,
               'mitgcm': payu.mitgcm,
               'gold': payu.gold}


def payu_sweep(model_name, config_path, hard_sweep):

    model = model_index[model_name]
    expt = model()
    expt.sweep(hard_sweep)


if __name__ == '__main__':

    # TODO: Need to inherit payu_parse! This is temporary
    parser = argparse.ArgumentParser()

    parser.add_argument('-m', '--model',
                        action='store',
                        dest='model_name',
                        default=None,
                        help='Select model type')

    parser.add_argument('-c', '--config',
                        action='store',
                        dest='config_path',
                        default=None,
                        help='Configuration path')

    parser.add_argument('--hard',
                        action='store_true',
                        dest='hard_sweep')

    args = vars(parser.parse_args())
    payu_sweep(**args)
